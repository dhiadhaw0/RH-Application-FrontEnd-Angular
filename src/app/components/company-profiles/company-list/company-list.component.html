<div class="company-list-container">
  <!-- Header Section -->
  <div class="list-header">
    <div class="header-content">
      <h1>Profils d'Entreprises</h1>
      <p>Découvrez les entreprises qui recrutent et explorez leurs cultures uniques</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" routerLink="/companies/compare">
        <i class="fas fa-balance-scale"></i>
        Comparer les entreprises
      </button>
    </div>
  </div>

  <!-- Search and Filters -->
  <div class="filters-section">
    <div class="search-bar">
      <div class="search-input-wrapper">
        <i class="fas fa-search"></i>
        <input
          type="text"
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
          placeholder="Rechercher une entreprise..."
          class="search-input">
      </div>
      <button class="btn btn-outline" (click)="onSearch()">
        Rechercher
      </button>
    </div>

    <div class="filters-row">
      <div class="filter-group">
        <label>Secteur</label>
        <select [(ngModel)]="selectedIndustry" (change)="onFilterChange()" class="filter-select">
          <option value="">Tous les secteurs</option>
          <option *ngFor="let industry of industries" [value]="industry">{{industry}}</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Taille</label>
        <select [(ngModel)]="selectedSize" (change)="onFilterChange()" class="filter-select">
          <option value="">Toutes tailles</option>
          <option *ngFor="let size of companySizes" [value]="size">{{size}} employés</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Trier par</label>
        <select [(ngModel)]="sortBy" (change)="onSortChange()" class="filter-select">
          <option value="name">Nom</option>
          <option value="followers">Popularité</option>
          <option value="rating">Note</option>
          <option value="size">Taille</option>
        </select>
      </div>

      <div class="filter-actions">
        <button class="btn btn-secondary" (click)="clearFilters()">
          <i class="fas fa-times"></i>
          Effacer
        </button>
      </div>
    </div>
  </div>

  <!-- Companies Grid -->
  <div class="companies-grid" *ngIf="!loading && !error">
    <div class="company-card" *ngFor="let company of companies">
      <div class="company-header">
        <img [src]="company.logo || '/assets/images/default-company-logo.png'"
             [alt]="company.name"
             class="company-logo">
        <div class="company-info">
          <h3 class="company-name">{{company.name}}</h3>
          <p class="company-industry">{{company.industry}}</p>
          <div class="company-stats">
            <span class="stat">
              <i class="fas fa-users"></i>
              {{company.followersCount}} abonnés
            </span>
            <span class="stat">
              <i class="fas fa-star"></i>
              {{getAverageRating(company)}}
            </span>
            <span class="stat">
              <i class="fas fa-gift"></i>
              {{getBenefitsCount(company)}} avantages
            </span>
          </div>
        </div>
      </div>

      <div class="company-description">
        <p>{{company.description}}</p>
      </div>

      <div class="company-details">
        <div class="detail-item">
          <i class="fas fa-building"></i>
          <span>{{company.size}} employés</span>
        </div>
        <div class="detail-item" *ngIf="company.headquarters">
          <i class="fas fa-map-marker-alt"></i>
          <span>{{company.headquarters}}</span>
        </div>
        <div class="detail-item" *ngIf="company.foundedYear">
          <i class="fas fa-calendar"></i>
          <span>Fondée en {{company.foundedYear}}</span>
        </div>
      </div>

      <div class="company-benefits-preview" *ngIf="company.benefits?.length">
        <h4>Avantages clés</h4>
        <div class="benefits-tags">
          <span class="benefit-tag" *ngFor="let benefit of company.benefits.slice(0, 3)">
            {{benefit.name}}
          </span>
          <span class="benefit-tag more" *ngIf="company.benefits.length > 3">
            +{{company.benefits.length - 3}} autres
          </span>
        </div>
      </div>

      <div class="company-actions">
        <button class="btn btn-primary" (click)="viewCompanyProfile(company.id)">
          <i class="fas fa-eye"></i>
          Voir le profil
        </button>
        <button
          class="btn"
          [class.btn-outline]="!company.isFollowing"
          [class.btn-success]="company.isFollowing"
          (click)="company.isFollowing ? unfollowCompany(company) : followCompany(company)">
          <i class="fas" [class.fa-plus]="!company.isFollowing" [class.fa-check]="company.isFollowing"></i>
          {{company.isFollowing ? 'Suivi' : 'Suivre'}}
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    <div class="loading-spinner"></div>
    <p>Chargement des entreprises...</p>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error && !loading">
    <div class="error-icon">
      <i class="fas fa-exclamation-triangle"></i>
    </div>
    <h3>Erreur</h3>
    <p>{{error}}</p>
    <button class="btn btn-primary" (click)="loadCompanies()">
      Réessayer
    </button>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading && !error && companies.length === 0">
    <div class="empty-icon">
      <i class="fas fa-building"></i>
    </div>
    <h3>Aucune entreprise trouvée</h3>
    <p>Essayez de modifier vos critères de recherche.</p>
    <button class="btn btn-primary" (click)="clearFilters()">
      Effacer les filtres
    </button>
  </div>
</div>
